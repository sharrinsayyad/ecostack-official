<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOSTACK AI - CEO Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: sans-serif; }
        .box-style { background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 20px; }
        .accent-green { color: #22c55e; }
        .loading-spinner { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #22c55e; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="p-6">

    <div id="topAlert" class="hidden max-w-7xl mx-auto mb-6 p-4 rounded-xl bg-blue-900/50 border border-blue-500 text-center">
        <p class="font-bold text-white">üîî CEO NOTIFICATION: Request <span id="pendingReqCode" class="text-blue-300"></span> Status Updated.</p>
    </div>

    <header class="text-center mb-8">
        <h1 class="text-4xl font-black accent-green tracking-tight">ECOSTACK AI</h1>
        <p class="text-slate-400 text-xs uppercase tracking-widest">Global Energy-Efficient Code Auditor</p>
    </header>

    <div class="max-w-7xl mx-auto space-y-6">
        
        <div class="grid md:grid-cols-2 gap-6">
            <div class="box-style">
                <h2 class="font-bold mb-2 text-red-400 flex justify-between">
                    <span>AUDIT CODE (WORST)</span>
                    <span id="currentLang" class="text-[10px] text-slate-500 bg-slate-800 px-2 py-1 rounded">DETECTING...</span>
                </h2>
                <textarea id="userInput" class="w-full h-72 bg-slate-900 p-4 font-mono text-xs border border-slate-700 rounded focus:border-red-500 focus:outline-none" placeholder="Paste user code here..."></textarea>
            </div>
            <div class="box-style relative">
                <div id="lockOverlay" class="absolute inset-0 bg-slate-950/95 flex flex-col items-center justify-center rounded-xl z-20 text-center p-4">
                    <div id="lockIcon" class="text-4xl mb-2">üîí</div>
                    <div id="loader" class="hidden loading-spinner mb-4"></div>
                    <p id="lockStatus" class="font-bold text-white uppercase tracking-wider">Locked: Waiting for Approval</p>
                    <p class="text-[10px] text-slate-500 mt-2 font-mono">UNIQUE REQ ID: <span id="displayReqCode" class="text-blue-400 font-bold"></span></p>
                </div>
                <h2 class="font-bold mb-2 text-green-400">OPTIMIZED AI OUTPUT</h2>
                <div id="optimizedCode" class="w-full h-72 bg-slate-900 p-4 font-mono text-xs overflow-auto text-slate-600 italic">
                    // Content encrypted until CEO approves the payment...
                </div>
            </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
            <div class="box-style border-b-4 border-red-500">
                <p class="text-[10px] text-slate-400 uppercase font-black">Worst Bill Waste</p>
                <p id="bill" class="text-xl font-bold">‚Çπ0.00</p>
            </div>
            <div class="box-style border-b-4 border-blue-500">
                <p class="text-[10px] text-slate-400 uppercase font-black">Total Savings</p>
                <p id="savings" class="text-xl font-bold">‚Çπ0.00</p>
            </div>
            <div class="box-style border-b-4 border-green-500 bg-green-900/10">
                <p class="text-[10px] text-green-500 uppercase font-black">Our 35% Commission</p>
                <p id="share" class="text-2xl font-black text-green-400">‚Çπ0.00</p>
            </div>
            <div class="box-style border-b-4 border-yellow-500">
                <p class="text-[10px] text-slate-400 uppercase font-black">Energy Waste</p>
                <p id="power" class="text-xl font-bold">-- kWh</p>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <div class="box-style text-center border-dashed border-slate-700">
                <h3 class="font-bold mb-4 text-sm text-blue-400">1. PAYMENT PORTAL</h3>
                <div id="qrBox" class="bg-white p-2 inline-block rounded-xl mb-4 shadow-lg"></div>
                <button onclick="sendWhatsApp()" class="w-full bg-blue-600 hover:bg-blue-700 py-4 rounded-xl font-bold text-sm transition-all shadow-xl">
                    I'VE PAID - SEND APPROVAL REQUEST
                </button>
            </div>

            <div class="box-style text-center border-2 border-yellow-600/20">
                <h3 class="font-bold mb-4 text-sm text-yellow-500 uppercase tracking-widest">2. CEO ADMIN PANEL</h3>
                <input type="password" id="adminKey" class="w-full bg-slate-900 border border-slate-700 p-4 rounded-xl text-center mb-4 text-white font-mono" placeholder="Enter Admin Secret Code">
                
                <div class="flex gap-4">
                    <button onclick="handleRequest('APPROVE')" class="w-1/2 bg-green-600 hover:bg-green-500 text-white font-black py-4 rounded-xl text-sm uppercase transition-all shadow-xl">
                        APPROVE ‚úÖ
                    </button>
                    <button onclick="handleRequest('REJECT')" class="w-1/2 bg-red-600 hover:bg-red-500 text-white font-black py-4 rounded-xl text-sm uppercase transition-all shadow-xl">
                        REJECT ‚ùå
                    </button>
                </div>

                <button id="dlBtn" onclick="downloadReport()" class="hidden w-full mt-4 bg-white text-black py-3 rounded-xl font-bold flex items-center justify-center gap-2">
                    üì• DOWNLOAD AUDIT REPORT (PDF)
                </button>
            </div>
        </div>

        <div id="historyPanel" class="hidden box-style overflow-x-auto border-t-2 border-blue-500 shadow-2xl">
            <h3 class="font-bold mb-4 text-xs accent-green uppercase tracking-tighter">Business Transaction Logs</h3>
            <table class="w-full text-left text-[11px] font-mono">
                <thead class="text-slate-500 border-b border-slate-700">
                    <tr><th class="p-2">TIMESTAMP</th><th class="p-2">REQUEST ID</th><th class="p-2">COMMISSION</th><th class="p-2">STATUS</th></tr>
                </thead>
                <tbody id="historyData"></tbody>
            </table>
        </div>
    </div>

    <footer class="mt-12 text-center text-slate-700 text-[10px] font-mono uppercase tracking-[0.2em] pb-10">
        Proprietary Engine &copy; 2026 Sharrin Sayyad | ECOSTACK AI Global
    </footer>

    <script>
        const THE_KEY = "rubinaramjan@14";
        let reqID = "REQ-" + Math.floor(1000 + Math.random() * 9000) + "-AX";
        document.getElementById('displayReqCode').innerText = reqID;

        document.getElementById('userInput').addEventListener('input', function(e) {
            const val = e.target.value;
            if(val.length > 5) {
                const waste = (val.length * 0.62).toFixed(2);
                const save = (waste * 0.75).toFixed(2);
                const comm = (save * 0.35).toFixed(2);
                const kwh = (val.length * 0.012).toFixed(3);
                document.getElementById('bill').innerText = '‚Çπ' + waste;
                document.getElementById('savings').innerText = '‚Çπ' + save;
                document.getElementById('share').innerText = '‚Çπ' + comm;
                document.getElementById('power').innerText = kwh + ' kWh';
                const upi = `upi://pay?pa=sayyadsharrin0@okaxis&pn=Sharrin%20Sayyad&am=${comm}&cu=INR`;
                document.getElementById('qrBox').innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(upi)}" alt="QR">`;
                document.getElementById('currentLang').innerText = "LANG DETECTED";
            }
        });

        function sendWhatsApp() {
            const amt = document.getElementById('share').innerText;
            const msg = `ECOSTACK AI ALERT:\n--------------------\nRequest ID: ${reqID}\nPayment Done: ${amt}\n\nCEO Ma'am, please approve my optimization request.`;
            window.open(`https://wa.me/9096530829?text=${encodeURIComponent(msg)}`);
        }

        function handleRequest(action) {
            const key = document.getElementById('adminKey').value;
            if(key !== THE_KEY) {
                alert("ACCESS DENIED: Incorrect Admin Key.");
                return;
            }

            if(action === 'APPROVE') {
                document.getElementById('lockIcon').classList.add('hidden');
                document.getElementById('loader').classList.remove('hidden');
                document.getElementById('lockStatus').innerText = "AI OPTIMIZING...";
                
                setTimeout(() => {
                    document.getElementById('lockOverlay').style.display = 'none';
                    document.getElementById('optimizedCode').innerText = "// SUCCESS: OPTIMIZED BY ECOSTACK AI\n// Request ID: " + reqID + "\n\nfunction ecoOptimized() {\n  return '65% Energy Saved';\n}";
                    document.getElementById('optimizedCode').classList.add('text-green-400');
                    document.getElementById('dlBtn').classList.remove('hidden');
                    document.getElementById('historyPanel').classList.remove('hidden');
                    addLog('APPROVED');
                }, 3500);
            } else {
                document.getElementById('lockStatus').innerText = "REQUEST REJECTED ‚ùå";
                document.getElementById('lockStatus').classList.add('text-red-500');
                alert("Request ID: " + reqID + " has been REJECTED.");
                addLog('REJECTED');
            }
        }

        function addLog(status) {
            const now = new Date();
            const color = status === 'APPROVED' ? 'text-green-400' : 'text-red-400';
            const row = `<tr class="border-b border-slate-800/50"><td class="p-2">${now.toLocaleString()}</td><td class="p-2 text-blue-400 font-bold">${reqID}</td><td class="p-2 font-bold">${document.getElementById('share').innerText}</td><td class="p-2 ${color} italic font-bold">${status}</td></tr>`;
            document.getElementById('historyData').innerHTML += row;
            document.getElementById('topAlert').classList.remove('hidden');
            document.getElementById('pendingReqCode').innerText = reqID;
        }

        function downloadReport() {
            const date = new Date().toLocaleString();
            const report = `ECOSTACK AI REPORT\nID: ${reqID}\nDate: ${date}\nPayment: ${document.getElementById('share').innerText}\nStatus: APPROVED\nEnergy Saved: ${document.getElementById('power').innerText} kWh`;
            const blob = new Blob([report], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.download = `Report_${reqID}.txt`;
            link.click();
        }
    </script>
</body>
</html>
